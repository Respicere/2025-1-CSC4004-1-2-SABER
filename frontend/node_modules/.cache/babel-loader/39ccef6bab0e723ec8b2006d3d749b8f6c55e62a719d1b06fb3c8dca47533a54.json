{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\82102\\\\Downloads\\\\2025-1-CSC4004-1-2-SABER-main\\\\2025-1-CSC4004-1-2-SABER-main\\\\frontend\\\\src\\\\pages\\\\SellerStartScreen.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport '../css/SellerStartScreen.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SellerStartScreen() {\n  _s();\n  const [searchParams] = useSearchParams();\n  const [token, setToken] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  function getVisitorKey() {\n    let key = localStorage.getItem('visitorKey');\n    if (!key) {\n      key = crypto.randomUUID();\n      localStorage.setItem('visitorKey', key);\n    }\n    return key;\n  }\n  const startVerification = async tokenToUse => {\n    if (!tokenToUse) {\n      setError('토큰이 없습니다');\n      return;\n    }\n    setError('');\n    setLoading(true);\n    try {\n      const visitorKey = getVisitorKey();\n      const res = await axios.get(`http://localhost:8080/api/saber`, {\n        params: {\n          token: tokenToUse,\n          visitorKey: visitorKey // 'visitor:' 오타 수정\n        },\n        withCredentials: true\n      });\n\n      // 세션을 다음 페이지에서 사용할 수 있도록 저장\n      localStorage.setItem('sessionId', res.data.id);\n\n      // 자동 이동\n      navigate('/seller/permission');\n    } catch (e) {\n      setError('인증 시작 실패');\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    const tokenFromUrl = searchParams.get('token');\n    if (tokenFromUrl) {\n      setToken(tokenFromUrl);\n    }\n  }, [searchParams]);\n  const goToGuide = () => {\n    navigate('/seller/guide');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"seller-start-container\",\n    children: [\" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"title\",\n      children: \"\\uD310\\uB9E4\\uC790 \\uC778\\uC99D \\uC2DC\\uC791\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-group\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"seller-start-button\",\n        onClick: () => startVerification(token),\n        disabled: loading || !token,\n        children: \"\\uC778\\uC99D \\uC2DC\\uC791\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: 'red',\n          textAlign: 'center'\n        },\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"confirmButton\",\n        onClick: goToGuide,\n        children: \"\\uC11C\\uBE44\\uC2A4 \\uC124\\uBA85 \\uBC0F \\uC0AC\\uC6A9\\uBC95\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n_s(SellerStartScreen, \"R5PJgB9RnOZqu4i2avNsdNFhLK4=\", false, function () {\n  return [useSearchParams, useNavigate];\n});\n_c = SellerStartScreen;\nvar _c;\n$RefreshReg$(_c, \"SellerStartScreen\");","map":{"version":3,"names":["useEffect","useState","useSearchParams","useNavigate","axios","jsxDEV","_jsxDEV","SellerStartScreen","_s","searchParams","token","setToken","loading","setLoading","error","setError","navigate","getVisitorKey","key","localStorage","getItem","crypto","randomUUID","setItem","startVerification","tokenToUse","visitorKey","res","get","params","withCredentials","data","id","e","tokenFromUrl","goToGuide","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","style","color","textAlign","_c","$RefreshReg$"],"sources":["C:/Users/82102/Downloads/2025-1-CSC4004-1-2-SABER-main/2025-1-CSC4004-1-2-SABER-main/frontend/src/pages/SellerStartScreen.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useSearchParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport '../css/SellerStartScreen.css'; \n\nexport default function SellerStartScreen() {\n    const [searchParams] = useSearchParams();\n    const [token, setToken] = useState('');\n    const [loading, setLoading] = useState(false);\n    const [error, setError] = useState('');\n    const navigate = useNavigate();\n\n    function getVisitorKey() {\n        let key = localStorage.getItem('visitorKey');\n        if (!key) {\n            key = crypto.randomUUID();\n            localStorage.setItem('visitorKey', key);\n        }\n        return key;\n    }\n\n    const startVerification = async (tokenToUse) => {\n        if (!tokenToUse) {\n            setError('토큰이 없습니다');\n            return;\n        }\n        setError('');\n        setLoading(true);\n        try {\n            const visitorKey = getVisitorKey();\n            const res = await axios.get(`http://localhost:8080/api/saber`, {\n                params: {\n                    token: tokenToUse,\n                    visitorKey: visitorKey, // 'visitor:' 오타 수정\n                },\n                withCredentials: true,\n            });\n\n            // 세션을 다음 페이지에서 사용할 수 있도록 저장\n            localStorage.setItem('sessionId', res.data.id);\n\n            // 자동 이동\n            navigate('/seller/permission');\n        } catch (e) {\n            setError('인증 시작 실패');\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    useEffect(() => {\n        const tokenFromUrl = searchParams.get('token');\n        if (tokenFromUrl) {\n            setToken(tokenFromUrl);\n        }\n    }, [searchParams]);\n\n    const goToGuide = () => {\n        navigate('/seller/guide');\n    };\n\n    return (\n        <div className=\"seller-start-container\"> {/* 전체 화면 중앙 정렬을 위한 컨테이너 */}\n            <h2 className=\"title\">판매자 인증 시작</h2>\n\n            {/* 버튼들을 감싸는 Flexbox 컨테이너 */}\n            <div className=\"button-group\">\n                <button \n                    className=\"seller-start-button\" \n                    onClick={() => startVerification(token)} \n                    disabled={loading || !token}\n                >\n                    인증 시작\n                </button>\n                {error && <p style={{ color: 'red', textAlign: 'center' }}>{error}</p>}\n                <button \n                    className=\"confirmButton\" \n                    onClick={goToGuide}\n                >\n                    서비스 설명 및 사용법\n                </button>\n            </div>\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}